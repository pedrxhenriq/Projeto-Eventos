<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Atualizar Evento</title>
    <script>
        function togglePrecoField() {
            var gratuitoCheckbox = document.getElementById("gratuito");
            var precoField = document.getElementById("preco");

            if (gratuitoCheckbox.checked) {
                precoField.disabled = true;
                precoField.value = "";
                precoField.removeAttribute("required");
            } else {
                precoField.disabled = false;
                precoField.setAttribute("required", "required");
            }
        }
    
        function validateDate() {
            var startDate = new Date(document.getElementById('data_inicio').value);
            var endDate = new Date(document.getElementById('data_fim').value);
            
            if (startDate > endDate) {
                document.getElementById('data_fim').value = '';
                alert('A data de fim não pode ser anterior à data de início.');
            }
        }

        function validateForm() {
            var startDate = new Date(document.getElementById('data_inicio').value);
            var endDate = new Date(document.getElementById('data_fim').value);
            
            if (startDate > endDate) {
                alert('A data de fim não pode ser anterior à data de início.');
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
    <h1>Atualizar Evento</h1>
    <form id="eventoForm" method="post" onsubmit="return validateForm()">
        <label for="titulo">Título:</label>
        <input type="text" id="titulo" name="titulo" value="{{ evento.titulo }}" required>
        <br>
        <label for="descricao">Descrição:</label>
        <textarea id="descricao" name="descricao" required>{{ evento.descricao }}</textarea>
        <br>
        <label for="data_inicio">Data de Início:</label>
        <input type="datetime-local" id="data_inicio" name="data_inicio" value="{{ evento.data_inicio.strftime('%Y-%m-%dT%H:%M') }}" onchange="validateDate()" required>
        <br>
        <label for="data_fim">Data de Fim:</label>
        <input type="datetime-local" id="data_fim" name="data_fim" value="{{ evento.data_fim.strftime('%Y-%m-%dT%H:%M') }}" required>
        <br>
        <label for="capacidade">Capacidade:</label>
        <input type="number" id="capacidade" name="capacidade" value="{{ evento.capacidade }}" required>
        <br>
        <label for="gratuito">Gratuito:</label>
        <input type="checkbox" id="gratuito" name="gratuito" {% if evento.gratuito %}checked{% endif %} onclick="togglePrecoField()">
        <br>
        <label for="preco">Preço:</label>
        <input type="number" step="0.01" id="preco" name="preco" value="{{ evento.preco }}" {% if evento.gratuito %}disabled{% endif %}>
        <br>
        <label for="idade_minima">Idade Mínima:</label>
        <input type="number" id="idade_minima" name="idade_minima" value="{{ evento.idade_minima }}">
        <br>
        <label for="cep">CEP:</label>
        <input type="text" id="cep" name="cep" value="{{ evento.cep }}">
        <br>
        <label for="logradouro">Logradouro:</label>
        <input type="text" id="logradouro" name="logradouro" value="{{ evento.logradouro }}">
        <br>
        <label for="bairro">Bairro:</label>
        <input type="text" id="bairro" name="bairro" value="{{ evento.bairro }}">
        <br>
        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" name="cidade" value="{{ evento.cidade }}">
        <br>
        <label for="uf">UF:</label>
        <input type="text" id="uf" name="uf" value="{{ evento.uf }}">
        <br>
        <label for="numero">Número:</label>
        <input type="text" id="numero" name="numero" value="{{ evento.numero }}">
        <br>
        <button type="submit">Atualizar</button>
    </form>
</body>
</html>
